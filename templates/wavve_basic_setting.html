{% extends "base.html" %}
{% block content %}

{{ macros.m_button_group([['globalSettingSaveBtn', '설정 저장']])}}
{{ macros.m_row_start('5') }}
{{ macros.m_row_end() }}

<form id="setting">
{{ macros.setting_select('basic_quality', '기본 화질', [['2160p', '2160p'], ['1080p', '1080p'], ['720p', '720p'], ['480p', '480p'], ['360p', '360p']], col='3', value=arg['basic_quality']) }}
{{ macros.setting_input_text('basic_save_path', '저장 폴더', value=arg['basic_save_path'], desc=['절대경로 혹은 {PATH_DATA}/download 와 같은 데이터 폴더 기준 상대 경로']) }}
</form>


<script type="text/javascript">
$(document).ready(function(){
});


//설정 저장
$("body").on('click', '#setting_save_btn', function(e){  
  e.preventDefault();
  var formData = get_formdata('#setting');
  $.ajax({
    url: '/' + package_name + '/ajax/setting_save',
    type: "POST", 
    cache: false,
    data:formData,
    dataType: "json",
    success: function (ret) {
      if (ret == 1) {
        $.notify('<strong>설정과 로그인 정보를 저장하였습니다.</strong>', {
          type: 'success'
        });
      } else if (ret == 2) {
        $.notify('<strong>설정을 저장하였으나 로그인에 실패하였습니다.</strong>', {
          type: 'warning'
        });
      } else if (ret) {
        $.notify('<strong>설정을 저장하였습니다.</strong>', {
          type: 'success'
        });
      } else {
        $.notify('<strong>설정저장 실패하였습니다.</strong>', {
          type: 'warning'
        });
      }
    }
  });
});


</script>    
{% endblock %}